{
    "version": "https://jsonfeed.org/version/1",
    "title": "null â€¢ All posts by \"c language\" tag",
    "description": "ğŸŒ¸",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/course/x86-architecture-and-Assembly-basics/",
            "url": "http://example.com/course/x86-architecture-and-Assembly-basics/",
            "title": "x86 architecture and Assembly basics",
            "date_published": "2024-10-25T07:43:11.000Z",
            "content_html": "<h1 id=\" x86 architecture\" class=\"active\"><a class=\"anchor\"  href=\"# x86 architecture\">#</a> x86 architecture</h1>\n\n<h2 id=\"Levels of Abstraction\" class=\"active\"><a class=\"anchor\"  href=\"#Levels of Abstraction\">#</a> Levels of Abstraction</h2>\n\n<p>æŠ½è±¡å±‚æ¬¡ï¼ˆLevels of Abstractionï¼‰ æ˜¯æŒ‡åœ¨è®¡ç®—æœºç³»ç»Ÿè®¾è®¡ä¸­ï¼Œå°†å¤æ‚çš„ç³»ç»Ÿåˆ†è§£ä¸ºä¸åŒçš„å±‚æ¬¡ï¼Œä»¥ä¾¿äºç†è§£ã€è®¾è®¡å’Œå®ç°ã€‚æ¯ä¸ªæŠ½è±¡å±‚éƒ½åŸºäºæ›´åº•å±‚çš„å±‚æ¬¡ï¼ŒåŒæ—¶ä¹Ÿä¸ºæ›´é«˜å±‚æ¬¡æä¾›åŸºç¡€ã€‚è¿™ç§å±‚æ¬¡åŒ–çš„è®¾è®¡æ–¹å¼ä½¿å¾—å¤æ‚ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚ä»¥ä¸‹æ˜¯è¿™äº›æŠ½è±¡å±‚æ¬¡çš„å…·ä½“è§£é‡Šï¼š</p>\n<ol>\n<li>ç¡¬ä»¶å±‚ï¼ˆHardware Levelï¼‰<br>è§£é‡Šï¼šè¿™æ˜¯æœ€åº•å±‚çš„æŠ½è±¡å±‚ï¼Œä¸»è¦æ˜¯ç”±å„ç§ç”µå­ç”µè·¯å’Œé€»è¾‘é—¨ï¼ˆå¦‚ XORã€ANDã€ORã€NOT é—¨ç­‰ï¼‰ç»„æˆã€‚è¿™äº›ç”µè·¯å®ç°äº†æœ€åŸºæœ¬çš„é€»è¾‘è¿ç®—å’Œæ•°æ®å¤„ç†ï¼Œæ˜¯è®¡ç®—æœºæ‰€æœ‰åŠŸèƒ½çš„åŸºç¡€ã€‚<br>ç‰¹ç‚¹ï¼šè¿™ä¸€å±‚æ˜¯æœ€æ¥è¿‘ç‰©ç†ç¡¬ä»¶çš„ï¼Œç›´æ¥å¤„ç†ç”µä¿¡å·å’Œç‰©ç†å¼€å…³çŠ¶æ€ã€‚</li>\n<li>å¾®ç å±‚ï¼ˆMicrocode Levelï¼‰&#x2F; å›ºä»¶å±‚ï¼ˆFirmware Levelï¼‰<br>è§£é‡Šï¼šå¾®ç ï¼ˆæˆ–å›ºä»¶ï¼‰æ˜¯ä¸€ç§åµŒå…¥åœ¨ç¡¬ä»¶ä¸­çš„ç‰¹æ®Šç¨‹åºï¼Œç”¨æ¥è§£é‡Šæœºå™¨æŒ‡ä»¤å¹¶æ§åˆ¶åº•å±‚ç¡¬ä»¶çš„æ“ä½œã€‚å®ƒä½äºç¡¬ä»¶å’Œæœºå™¨ç ä¹‹é—´ã€‚<br>ç‰¹ç‚¹ï¼šå¾®ç ä½œä¸ºç¡¬ä»¶ä¸æœºå™¨ç çš„æ¡¥æ¢ï¼Œæ˜¯æŒ‡ä»¤æ‰§è¡Œçš„æ§åˆ¶é€»è¾‘ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜ç¡¬ä»¶çš„æƒ…å†µä¸‹æ›´æ–°æˆ–è°ƒæ•´è®¡ç®—æœºçš„åŠŸèƒ½ã€‚</li>\n<li>æœºå™¨ç å±‚ï¼ˆMachine Code Levelï¼‰<br>è§£é‡Šï¼šæœºå™¨ç æ˜¯è®¡ç®—æœºç›´æ¥æ‰§è¡Œçš„äºŒè¿›åˆ¶ä»£ç ï¼Œé€šå¸¸ä»¥æ“ä½œç ï¼ˆopcodesï¼‰å’Œåå…­è¿›åˆ¶æ•°å­—å½¢å¼è¡¨ç¤ºã€‚å®ƒç”±ä¸€ç³»åˆ—ä½çº§æŒ‡ä»¤ç»„æˆï¼Œç”¨äºæ§åˆ¶è®¡ç®—æœºçš„å¤„ç†å™¨æ‰§è¡Œä»»åŠ¡ã€‚<br>ç‰¹ç‚¹ï¼šæœºå™¨ç æ˜¯æœ€åº•å±‚çš„å¯ç¼–ç¨‹è¯­è¨€ï¼Œåªæœ‰è®¡ç®—æœºå¯ä»¥ç›´æ¥æ‰§è¡Œï¼Œç”±å¤„ç†å™¨æŒ‰ç…§æŒ‡ä»¤æ‰§è¡Œå…·ä½“æ“ä½œã€‚</li>\n<li>ä½çº§è¯­è¨€å±‚ï¼ˆLow-Level Languages Levelï¼‰<br>è§£é‡Šï¼šä½çº§è¯­è¨€æ˜¯æœºå™¨ç çš„äººç±»å¯è¯»ç‰ˆæœ¬ï¼Œä¾‹å¦‚æ±‡ç¼–è¯­è¨€ï¼ˆAssembly Languageï¼‰ã€‚å®ƒä½¿ç”¨åŠ©è®°ç¬¦ï¼ˆå¦‚ MOVã€ADDã€JMP ç­‰ï¼‰æ¥ä»£è¡¨æœºå™¨æŒ‡ä»¤ï¼Œæ›´æ˜“äºç¼–ç¨‹å’Œè°ƒè¯•ã€‚<br>ç‰¹ç‚¹ï¼šä½çº§è¯­è¨€ç´§å¯†å¯¹åº”è®¡ç®—æœºçš„ç¡¬ä»¶ç»“æ„ï¼Œç¼–ç¨‹è€…éœ€è¦äº†è§£å…·ä½“çš„è®¡ç®—æœºæ¶æ„ï¼Œé€‚åˆç¼–å†™æ“ä½œç³»ç»Ÿã€é©±åŠ¨ç¨‹åºå’ŒåµŒå…¥å¼ç³»ç»Ÿã€‚</li>\n<li>é«˜çº§è¯­è¨€å±‚ï¼ˆHigh-Level Languages Levelï¼‰<br>è§£é‡Šï¼šé«˜çº§è¯­è¨€ï¼ˆå¦‚ Cã€C++ã€Java ç­‰ï¼‰æä¾›äº†æ›´æŠ½è±¡ã€æ›´äººæ€§åŒ–çš„è¯­æ³•å’Œç»“æ„ï¼Œä½¿å¾—ç¼–ç¨‹è€…å¯ä»¥æ›´è½»æ¾åœ°ç¼–å†™å¤æ‚çš„ç¨‹åºã€‚è¿™äº›è¯­è¨€ä¸­çš„ä»£ç é€šè¿‡ç¼–è¯‘å™¨è½¬æ¢æˆæœºå™¨ç ã€‚<br>ç‰¹ç‚¹ï¼šé«˜çº§è¯­è¨€é€šå¸¸å…·æœ‰è‰¯å¥½çš„è·¨å¹³å°æ€§å’Œå¯ç§»æ¤æ€§ï¼Œç¼–ç¨‹æ•ˆç‡é«˜ï¼Œé€‚åˆå¼€å‘åº”ç”¨ç¨‹åºå’Œå¤§å‹è½¯ä»¶ç³»ç»Ÿã€‚</li>\n<li>è§£é‡Šå‹è¯­è¨€å±‚ï¼ˆInterpreted Languages Levelï¼‰<br>è§£é‡Šï¼šè§£é‡Šå‹è¯­è¨€ï¼ˆå¦‚ Pythonã€JavaScriptï¼‰ä¸æ˜¯ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼Œè€Œæ˜¯å…ˆè¢«ç¿»è¯‘æˆå­—èŠ‚ç ï¼Œç„¶ååœ¨è§£é‡Šå™¨ä¸­æ‰§è¡Œã€‚<br>ç‰¹ç‚¹ï¼šè§£é‡Šå‹è¯­è¨€æ›´çµæ´»ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’ŒåŸå‹è®¾è®¡ï¼Œä½†æ‰§è¡Œé€Ÿåº¦é€šå¸¸æ¯”ç¼–è¯‘å‹è¯­è¨€æ…¢ã€‚</li>\n<li>å­—èŠ‚ç å±‚ï¼ˆBytecode Levelï¼‰<br>è§£é‡Šï¼šå­—èŠ‚ç æ˜¯é«˜çº§è¯­è¨€åœ¨è¢«è§£é‡Šæ‰§è¡Œä¹‹å‰çš„ä¸­é—´å½¢å¼ã€‚è§£é‡Šå™¨å°†å­—èŠ‚ç ç¿»è¯‘ä¸ºæœºå™¨å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤ã€‚<br>ç‰¹ç‚¹ï¼šå­—èŠ‚ç çš„è®¾è®¡é€šå¸¸ä¸ç¡¬ä»¶æ— å…³ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å¹³å°ä¸Šè¢«ç›¸åŒçš„è§£é‡Šå™¨æ‰§è¡Œï¼Œä¾‹å¦‚ Java å’Œ Python çš„è™šæ‹Ÿæœºï¼ˆJVMã€Python Interpreterï¼‰éƒ½ä½¿ç”¨å­—èŠ‚ç ã€‚</li>\n</ol>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b4d8733f64.png\" alt=\"img\"></p>\n<h2 id=\"Assembly\" class=\"active\"><a class=\"anchor\"  href=\"#Assembly\">#</a> Assembly</h2>\n\n<ol>\n<li>æ±‡ç¼–è¯­è¨€ï¼ˆAssembly Languageï¼‰ æ˜¯ä¸€ç§ä½çº§ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¸è®¡ç®—æœºçš„æœºå™¨ç æœ‰ç€ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œå¹¶ä¸”æ¯”æœºå™¨ç æ›´æ˜“äºäººç±»ç†è§£å’Œç¼–å†™ã€‚ä»¥ä¸‹æ˜¯å¯¹æ±‡ç¼–è¯­è¨€åŠç›¸å…³æ¦‚å¿µçš„è¯¦ç»†ä¸­æ–‡è§£é‡Šï¼š</li>\n</ol>\n<ul>\n<li>æ±‡ç¼–è¯­è¨€çš„å®šä¹‰<br>æ±‡ç¼–è¯­è¨€æ˜¯æœ€æ¥è¿‘æœºå™¨ç çš„é«˜çº§è¯­è¨€ï¼Œå®ƒå¯ä»¥å°†æœºå™¨æŒ‡ä»¤ç”¨äººç±»å¯è¯»çš„åŠ©è®°ç¬¦ï¼ˆå¦‚ MOVã€ADDã€JMP ç­‰ï¼‰æ¥è¡¨ç¤ºã€‚è¿™ä½¿å¾—ç¨‹åºå‘˜èƒ½å¤Ÿç›´æ¥æ§åˆ¶ç¡¬ä»¶ï¼ŒåŒæ—¶æ¯”ç›´æ¥ç¼–å†™äºŒè¿›åˆ¶ä»£ç æ›´åŠ æ–¹ä¾¿ã€‚</li>\n<li>ä¸æœºå™¨ç çš„å…³ç³»<br>æ±‡ç¼–è¯­è¨€æ˜¯æœ€å¯é çš„ã€å¯ä»¥ä»æœºå™¨ç ä¸­æ¢å¤çš„é«˜çº§è¯­è¨€ã€‚å¦‚æœé«˜å±‚è¯­è¨€çš„æºä»£ç ä¸å¯ç”¨æ—¶ï¼Œé€šè¿‡åæ±‡ç¼–ï¼ˆdisassemblyï¼‰ï¼Œå¯ä»¥å°†æœºå™¨ç è½¬æ¢å›å¯¹åº”çš„æ±‡ç¼–ä»£ç ã€‚<br>æ±‡ç¼–è¯­è¨€å’Œæœºå™¨ç ä¹‹é—´çš„å¯¹åº”å…³ç³»ä½¿å¾—ç¨‹åºå‘˜å¯ä»¥æ¸…æ¥šåœ°äº†è§£è®¡ç®—æœºåº•å±‚çš„æ‰§è¡Œé€»è¾‘å’Œæµç¨‹ã€‚</li>\n<li>è„†å¼±ä»£ç å’Œæ¶æ„è½¯ä»¶çš„å­˜å‚¨å½¢å¼<br>åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè„†å¼±ä»£ç æˆ–æ¶æ„è½¯ä»¶é€šå¸¸ä»¥äºŒè¿›åˆ¶å½¢å¼ï¼ˆå³æœºå™¨ç ï¼‰å­˜å‚¨ã€‚è¿™ç§å½¢å¼æ˜¯è®¡ç®—æœºç›´æ¥æ‰§è¡Œçš„ä»£ç ï¼Œä½†å¯¹äººç±»è€Œè¨€ä¸å¯è¯»ã€‚</li>\n<li>åæ±‡ç¼–å™¨çš„ä½œç”¨<br>åæ±‡ç¼–å™¨æ˜¯ä¸€ç§å·¥å…·ï¼Œå®ƒä»¥äºŒè¿›åˆ¶ä»£ç ä¸ºè¾“å…¥ï¼Œå¹¶å°†å…¶ç¿»è¯‘æˆç›¸åº”çš„æ±‡ç¼–ä»£ç è¾“å‡ºã€‚é€šè¿‡åæ±‡ç¼–ï¼Œå¯ä»¥å°†æœºå™¨ç è¿˜åŸä¸ºäººç±»å¯è¯»çš„æ±‡ç¼–è¯­è¨€ï¼Œæœ‰åŠ©äºåˆ†æå’Œè°ƒè¯•ç¨‹åºï¼Œç‰¹åˆ«æ˜¯åœ¨é€†å‘å·¥ç¨‹æˆ–å®‰å…¨åˆ†æä¸­ã€‚</li>\n<li>æ±‡ç¼–è¯­è¨€æ˜¯å¤šç§è¯­è¨€çš„é›†åˆ<br>æ±‡ç¼–è¯­è¨€å®é™…ä¸Šæ˜¯å¤šç§è¯­è¨€çš„é›†åˆï¼Œå› ä¸ºä¸åŒçš„è®¡ç®—æœºæ¶æ„ï¼ˆå¦‚ x86ã€ARMã€MIPS ç­‰ï¼‰æœ‰å„è‡ªç‹¬ç‰¹çš„æŒ‡ä»¤é›†å’Œæ±‡ç¼–è¯­è¨€æ ¼å¼ã€‚<br>åœ¨å­¦ä¹ å’Œä½¿ç”¨æ±‡ç¼–è¯­è¨€æ—¶ï¼Œé€šå¸¸ä¼šé’ˆå¯¹ç‰¹å®šçš„è®¡ç®—æœºæ¶æ„è¿›è¡Œæ·±å…¥ç ”ç©¶ã€‚ä¾‹å¦‚ï¼Œx86 æ±‡ç¼–å’Œ ARM æ±‡ç¼–åœ¨æŒ‡ä»¤é›†ã€å¯„å­˜å™¨ä½¿ç”¨å’ŒæŒ‡ä»¤æ ¼å¼ä¸Šéƒ½æœ‰æ˜æ˜¾çš„ä¸åŒã€‚</li>\n</ul>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b4f21f3929.png\" alt=\"img\"><br>æ•´ä¸ªè¿‡ç¨‹ä»æ±‡ç¼–è¯­è¨€ï¼ˆasm æ–‡ä»¶ï¼‰å¼€å§‹ï¼Œé€šè¿‡æ±‡ç¼–å™¨ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œå†é€šè¿‡é“¾æ¥å™¨å°†ç›®æ ‡æ–‡ä»¶å’Œåº“æ–‡ä»¶ç»“åˆç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæœ€åå°†å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œ</p>\n<ul>\n<li>æ±‡ç¼–å™¨ï¼ˆAssemblerï¼‰<br>æ±‡ç¼–å™¨çš„ä½œç”¨æ˜¯å°†æ±‡ç¼–è¯­è¨€çš„ä»£ç ï¼ˆasm æ–‡ä»¶ï¼‰ç¿»è¯‘æˆç›®æ ‡æ–‡ä»¶ï¼ˆobject fileï¼‰ã€‚ç›®æ ‡æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶å½¢å¼çš„æ–‡ä»¶ï¼ŒåŒ…å«äº†æœºå™¨å¯ä»¥ç†è§£çš„æŒ‡ä»¤å’Œæ•°æ®ï¼Œä½†è¿˜ä¸æ˜¯å®Œæ•´çš„å¯æ‰§è¡Œç¨‹åºã€‚</li>\n<li>é“¾æ¥å™¨ï¼ˆLinkerï¼‰<br>é“¾æ¥å™¨çš„ä½œç”¨æ˜¯å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼ˆå¦‚é™æ€åº“æˆ–åŠ¨æ€åº“ï¼‰ç»„åˆèµ·æ¥ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutableï¼‰ã€‚<br>  é™æ€åº“ï¼ˆStatic Libraryï¼‰ï¼šé™æ€åº“ä¸­çš„ä»£ç åœ¨ç¼–è¯‘æœŸé—´ç›´æ¥è¢«é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚<br>  åŠ¨æ€åº“ï¼ˆDynamic Libraryï¼‰ï¼šåŠ¨æ€åº“ä¸­çš„ä»£ç åœ¨è¿è¡Œæ—¶è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>Assembler vs. Compiler</li>\n</ol>\n<ul>\n<li>ç¼–è¯‘å™¨(Compiler) vs. æ±‡ç¼–å™¨(Assembler)<br>ç¼–è¯‘å™¨ï¼šå°†é«˜çº§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼ˆå¦‚ Cã€C++ã€Java ç­‰ï¼‰è½¬æ¢ä¸ºæœºå™¨çº§ä»£ç ã€‚<br>æ±‡ç¼–å™¨ï¼šå°†æ±‡ç¼–è¯­è¨€çš„ä»£ç è½¬æ¢ä¸ºæœºå™¨çº§ä»£ç ã€‚</li>\n<li>è¾“å…¥<br>ç¼–è¯‘å™¨ï¼šä»¥é«˜çº§è¯­è¨€çš„æºä»£ç ä¸ºè¾“å…¥ã€‚<br>æ±‡ç¼–å™¨ï¼šä»¥æ±‡ç¼–è¯­è¨€çš„ä»£ç ä¸ºè¾“å…¥ã€‚</li>\n<li>è½¬æ¢æ–¹å¼<br>ç¼–è¯‘å™¨ï¼šä¼šæ£€æŸ¥å¹¶ä¸€æ¬¡æ€§å°†æ•´ä¸ªä»£ç è½¬æ¢ä¸ºæœºå™¨ä»£ç ã€‚<br>æ±‡ç¼–å™¨ï¼šä¸€èˆ¬ä¸ä¸€æ¬¡æ€§è½¬æ¢å®Œæ•´ä»£ç ï¼Œè€Œæ˜¯åˆ†ä¸¤æ­¥å¤„ç†ã€‚</li>\n<li>å†…éƒ¨æ¨¡å—<br>ç¼–è¯‘å™¨ï¼šåŒ…å«è¯æ³•åˆ†æå™¨ã€è¯­æ³•åˆ†æå™¨ã€è¯­ä¹‰åˆ†æå™¨ã€ä»£ç ä¼˜åŒ–å™¨å’Œä»£ç ç”Ÿæˆå™¨ç­‰æ¨¡å—ã€‚( lexical analyzer, Syntax analyzer, Semantic analyzer, Code optimizer, Code generator)<br>æ±‡ç¼–å™¨ï¼šåœ¨ä¸¤æ¬¡æ‰«æä¸­å®Œæˆæ‰€æœ‰å·¥ä½œã€‚</li>\n<li>è¾“å‡ºç»“æœ<br>ç¼–è¯‘å™¨ï¼šè¾“å‡ºçš„æ˜¯æœºå™¨ä»£ç çš„åŠ©è®°ç¬¦(Mnemonic)ç‰ˆæœ¬ã€‚<br>æ±‡ç¼–å™¨ï¼šè¾“å‡ºçš„æ˜¯æœºå™¨ä»£ç çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚</li>\n<li>å¸¸è§ç±»å‹<br>ç¼–è¯‘å™¨ï¼šå¦‚ Cã€C++ã€Java çš„ç¼–è¯‘å™¨ã€‚<br>æ±‡ç¼–å™¨ï¼šå¦‚ GASï¼ˆGNU Assemblerï¼‰ã€GNU æ±‡ç¼–å™¨</li>\n</ul>\n<ol start=\"3\">\n<li>Two main forms of assembly syntax</li>\n</ol>\n<ul>\n<li>NASM format: <instr> <dest>, <source> &lt;; comment&gt; : mov eax, 10 </li>\n<li>AT&amp;T format:  <instr> <source>, <dest> &lt;# comment&gt;: mov $10, %eax<br>AT&amp;T format reverses the order of operands, uses a % before registers and a $ before literal values</li>\n</ul>\n<ol start=\"4\">\n<li>Fundamental Data Types</li>\n</ol>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b528c52025.png\" alt=\"img\"></p>\n<ul>\n<li><p>Byteï¼ˆå­—èŠ‚ï¼‰<br>å¤§å°ï¼š1 å­—èŠ‚ &#x3D; 8 ä½ï¼ˆbitï¼‰ã€‚<br>ç¤ºä¾‹ï¼šå›¾ä¸­å±•ç¤ºçš„ 5D æ˜¯ä¸€ä¸ª 8 ä½çš„äºŒè¿›åˆ¶æ•°ï¼ˆ01011101ï¼‰ï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚<br>è§£é‡Šï¼šä¸€ä¸ªå­—èŠ‚çš„äºŒè¿›åˆ¶ä½å¯ä»¥è¡¨ç¤º 0 åˆ° 255 ä¹‹é—´çš„æ•´æ•°ï¼ˆæ— ç¬¦å·ï¼‰ï¼Œæˆ– -128 åˆ° 127 ä¹‹é—´çš„æ•´æ•°ï¼ˆæœ‰ç¬¦å·ï¼‰ã€‚</p>\n</li>\n<li><p>Wordï¼ˆå­—ï¼‰<br>å¤§å°ï¼š2 å­—èŠ‚ &#x3D; 16 ä½ï¼ˆbitï¼‰ã€‚<br>ç¤ºä¾‹ï¼šå›¾ä¸­å±•ç¤ºçš„ 8BEC è¡¨ç¤ºä¸€ä¸ª 16 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå…¶ä¸­ï¼š<br>é«˜å­—èŠ‚ï¼ˆHigh Byteï¼‰ï¼š8B<br>ä½å­—èŠ‚ï¼ˆLow Byteï¼‰ï¼šEC<br>è§£é‡Šï¼šä¸€ä¸ª Word å¯ä»¥è¡¨ç¤º 0 åˆ° 65535 ä¹‹é—´çš„æ— ç¬¦å·æ•´æ•°ï¼Œæˆ– -32768 åˆ° 32767 ä¹‹é—´çš„æœ‰ç¬¦å·æ•´æ•°ã€‚</p>\n</li>\n<li><p>Dwordï¼ˆåŒå­—ï¼‰<br>å¤§å°ï¼š4 å­—èŠ‚ &#x3D; 32 ä½ï¼ˆbitï¼‰ã€‚<br>ç¤ºä¾‹ï¼šå›¾ä¸­å±•ç¤ºçš„ 000136CF è¡¨ç¤ºä¸€ä¸ª 32 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå…¶ä¸­ï¼š<br>é«˜å­—ï¼ˆHigh Wordï¼‰ï¼š0001<br>ä½å­—ï¼ˆLow Wordï¼‰ï¼š36CF<br>è§£é‡Šï¼šä¸€ä¸ª Dword å¯ä»¥è¡¨ç¤ºæ›´å¤§çš„æ•´æ•°èŒƒå›´ï¼Œç”¨äºå­˜å‚¨æ›´å¤§çš„æ•°å€¼æˆ–å†…å­˜åœ°å€ã€‚</p>\n</li>\n<li><p>Qwordï¼ˆå››å­—ï¼‰<br>å¤§å°ï¼š8 å­—èŠ‚ &#x3D; 64 ä½ï¼ˆbitï¼‰ã€‚<br>ç¤ºä¾‹ï¼šå›¾ä¸­å±•ç¤ºçš„ CF000136CF è¡¨ç¤ºä¸€ä¸ª 64 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå…¶ä¸­ï¼š<br>é«˜åŒå­—ï¼ˆHigh Dwordï¼‰ï¼šCF00<br>ä½åŒå­—ï¼ˆLow Dwordï¼‰ï¼š0136CF<br>è§£é‡Šï¼šä¸€ä¸ª Qword å¯ä»¥è¡¨ç¤ºæ›´å¤§çš„æ•´æ•°æˆ–æµ®ç‚¹æ•°èŒƒå›´ï¼Œå¸¸ç”¨äº 64 ä½å¤„ç†å™¨ä¸Šçš„è¿ç®—ã€‚</p>\n</li>\n<li><p>Data in Memory<br> Little-endian format: a low-order byte is stored at the lower address<br><img data-src=\"https://img.picui.cn/free/2024/10/25/671b538e3e57f.png\" alt=\"img\"></p>\n</li>\n</ul>\n<h2 id=\"CPU Registers\" class=\"active\"><a class=\"anchor\"  href=\"#CPU Registers\">#</a>CPU Registers</h2>\n\n<ol>\n<li>CPU å¯„å­˜å™¨æ˜¯ CPU å†…éƒ¨çš„ä¸€å°éƒ¨åˆ†æ•°æ®å­˜å‚¨å•å…ƒï¼Œç”¨äºæš‚å­˜æŒ‡ä»¤ã€æ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ã€‚å¯„å­˜å™¨æ˜¯ CPU ä¸­é€Ÿåº¦æœ€å¿«çš„å­˜å‚¨å•å…ƒï¼Œæ¯”å…¶ä»–å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ RAMã€ç¡¬ç›˜ï¼‰å¿«å¾—å¤šï¼Œå› ä¸ºå®ƒä»¬ä½äº CPU å†…éƒ¨ï¼Œèƒ½å¤Ÿå¿«é€Ÿè¯»å†™æ•°æ®ã€‚<br>CPU å¯„å­˜å™¨çš„ç±»å‹</li>\n</ol>\n<ul>\n<li>é€šç”¨å¯„å­˜å™¨ï¼ˆGeneral Registersï¼‰<br>ç”¨é€”ï¼šåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ç”± CPU ä½¿ç”¨ï¼Œç”¨äºå­˜å‚¨æ•°æ®ã€æ“ä½œæ•°å’Œä¸´æ—¶ç»“æœã€‚<br>åŠŸèƒ½ï¼šå¯ä»¥ç”¨äºæ•´æ•°è¿ç®—ã€åœ°å€è¿ç®—å’Œæ•°æ®çš„ä¼ è¾“ï¼Œæ˜¯æœ€å¸¸ç”¨çš„å¯„å­˜å™¨ç±»å‹ã€‚</li>\n<li>æ®µå¯„å­˜å™¨ï¼ˆSegment Registersï¼‰<br>ç”¨é€”ï¼šç”¨äºç®¡ç†å’Œè·Ÿè¸ªå†…å­˜çš„ä¸åŒæ®µï¼ˆå¦‚ä»£ç æ®µã€æ•°æ®æ®µå’Œæ ˆæ®µï¼‰ã€‚<br>åŠŸèƒ½ï¼šå¸®åŠ© CPU ç¡®å®šå†…å­˜è®¿é—®çš„å…·ä½“åŒºåŸŸï¼Œä½¿å¾—å†…å­˜åˆ†æ®µç®¡ç†æ›´åŠ é«˜æ•ˆã€‚</li>\n<li>çŠ¶æ€æ ‡å¿—ï¼ˆStatus Flagsï¼‰<br>ç”¨é€”ï¼šå­˜å‚¨ç¨‹åºæ‰§è¡Œçš„çŠ¶æ€ä¿¡æ¯ï¼Œä¾‹å¦‚è¿ç®—ç»“æœæ˜¯æ­£ã€è´Ÿã€é›¶ï¼Œæˆ–æ˜¯å¦å‘ç”Ÿæº¢å‡ºç­‰ã€‚<br>åŠŸèƒ½ï¼šåœ¨ CPU è¿›è¡Œæ¡ä»¶åˆ¤æ–­æˆ–å†³ç­–æ—¶æä¾›å¿…è¦çš„ä¿¡æ¯æ”¯æŒï¼Œå†³å®šç¨‹åºçš„æ‰§è¡Œè·¯å¾„ã€‚</li>\n<li>æŒ‡ä»¤æŒ‡é’ˆï¼ˆInstruction Pointersï¼‰<br>ç”¨é€”ï¼šç”¨äºè·Ÿè¸ªä¸‹ä¸€æ¡å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚<br>åŠŸèƒ½ï¼šç¡®ä¿ç¨‹åºçš„æŒ‡ä»¤æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ˜¯æ§åˆ¶ç¨‹åºæµç¨‹çš„å…³é”®å¯„å­˜å™¨ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>x86 Registers<ol>\n<li>æ•°æ®å¯„å­˜å™¨ï¼ˆData Registersï¼‰<ul>\n<li>EAXï¼ˆç´¯åŠ å™¨ï¼‰ï¼šä¸»è¦ç”¨äºè¾“å…¥&#x2F;è¾“å‡ºå’Œå¤§å¤šæ•°ç®—æœ¯è¿ç®—ã€‚ä¾‹å¦‚ï¼ŒåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•æ“ä½œæ—¶ï¼Œé€šå¸¸ä¼šç”¨åˆ° EAXã€‚</li>\n<li>EBXï¼ˆåŸºå€å¯„å­˜å™¨ï¼‰ï¼šå¯ç”¨äºç´¢å¼•å¯»å€æ¨¡å¼ï¼Œå³åœ¨è®¿é—®æ•°ç»„æˆ–ç»“æ„ä¸­çš„å…ƒç´ æ—¶ï¼ŒEBX å¯ä»¥ä½œä¸ºåŸºå€å¯„å­˜å™¨ä½¿ç”¨ã€‚</li>\n<li>ECXï¼ˆè®¡æ•°å¯„å­˜å™¨ï¼‰ï¼šåœ¨å¾ªç¯æ“ä½œä¸­å­˜å‚¨å¾ªç¯è®¡æ•°ï¼Œé€šå¸¸ç”¨äºå®ç°è¿­ä»£æ“ä½œã€‚</li>\n<li>EDXï¼ˆæ•°æ®å¯„å­˜å™¨ï¼‰ï¼šä¹Ÿç”¨äºè¾“å…¥&#x2F;è¾“å‡ºæ“ä½œï¼Œæœ‰æ—¶ä¸ AX ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚åœ¨æŸäº›ä¹˜æ³•å’Œé™¤æ³•è¿ç®—ä¸­ã€‚</li>\n</ul>\n</li>\n<li>ç´¢å¼•å¯„å­˜å™¨ï¼ˆIndex Registersï¼‰<ul>\n<li>ESIï¼ˆæºç´¢å¼•ï¼‰ï¼šç”¨äºå­—ç¬¦ä¸²æ“ä½œçš„æºç´¢å¼•ï¼Œé€šå¸¸åœ¨æ•°æ®çš„è¯»å–æ“ä½œä¸­ä½¿ç”¨ã€‚</li>\n<li>EDIï¼ˆç›®æ ‡ç´¢å¼•ï¼‰ï¼šç”¨äºå­—ç¬¦ä¸²æ“ä½œçš„ç›®æ ‡ç´¢å¼•ï¼Œé€šå¸¸åœ¨æ•°æ®çš„å†™å…¥æ“ä½œä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li>æ®µå¯„å­˜å™¨ï¼ˆSegment Registersï¼‰<ul>\n<li>CSï¼ˆä»£ç æ®µå¯„å­˜å™¨ï¼‰ï¼šæŒ‡å‘åŒ…å«æ‰€æœ‰å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„ä»£ç æ®µã€‚</li>\n<li>DSï¼ˆæ•°æ®æ®µå¯„å­˜å™¨ï¼‰ï¼šæŒ‡å‘åŒ…å«å…¨å±€æ•°æ®ã€å¸¸é‡å’Œå·¥ä½œåŒºçš„æ•°æ®æ®µã€‚</li>\n<li>SSï¼ˆæ ˆæ®µå¯„å­˜å™¨ï¼‰ï¼šæŒ‡å‘åŒ…å«å±€éƒ¨æ•°æ®å’Œè¿‡ç¨‹æˆ–å­ç¨‹åºè¿”å›åœ°å€çš„æ ˆæ®µã€‚</li>\n<li>å…¶ä»–æ®µå¯„å­˜å™¨ï¼ˆESã€FSã€GSï¼‰ï¼šæä¾›é¢å¤–çš„æ•°æ®å­˜å‚¨æ®µï¼Œç”¨äºå­˜æ”¾å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚<br>åœ¨æ®µå†…çš„æ‰€æœ‰å†…å­˜ä½ç½®éƒ½ç›¸å¯¹äºæ®µçš„èµ·å§‹åœ°å€ã€‚</li>\n</ul>\n</li>\n<li>çŠ¶æ€å¯„å­˜å™¨ï¼ˆStatus Registerï¼‰<ul>\n<li>EFLAGS å¯„å­˜å™¨ï¼šç”¨äºå­˜å‚¨å¤„ç†å™¨çš„çŠ¶æ€æ ‡å¿—ï¼Œæ¯ä¸ªæ ‡å¿—ä½è¡¨ç¤ºä¸åŒçš„çŠ¶æ€æˆ–æ¡ä»¶ï¼š</li>\n<li>ZFï¼ˆé›¶æ ‡å¿—ï¼‰ï¼šå½“è¿ç®—ç»“æœä¸ºé›¶æ—¶è®¾ç½®ã€‚</li>\n<li>CFï¼ˆè¿›ä½æ ‡å¿—ï¼‰ï¼šå½“è¿ç®—ç»“æœè¿‡å¤§æˆ–è¿‡å°æ—¶è®¾ç½®ã€‚</li>\n<li>SFï¼ˆç¬¦å·æ ‡å¿—ï¼‰ï¼šå½“è¿ç®—ç»“æœä¸ºè´Ÿæ—¶è®¾ç½®ã€‚</li>\n<li>TFï¼ˆé™·é˜±æ ‡å¿—ï¼‰ï¼šç”¨äºè°ƒè¯•ï¼Œè®¾ç½®è¯¥æ ‡å¿—æ—¶ï¼Œå¤„ç†å™¨ä¸€æ¬¡åªæ‰§è¡Œä¸€æ¡æŒ‡ä»¤ã€‚é€šå¸¸è¢«è°ƒè¯•å·¥å…·ï¼ˆå¦‚ GDBï¼‰ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li>æŒ‡ä»¤æŒ‡é’ˆï¼ˆInstruction Pointer, EIPï¼‰ä¹Ÿç§°ä¸ºç¨‹åºè®¡æ•°å™¨ï¼Œå®ƒåŒ…å«ä¸‹ä¸€æ¡å°†è¢«æ‰§è¡Œçš„æŒ‡ä»¤çš„åç§»åœ°å€ã€‚<ul>\n<li>EIP çš„å”¯ä¸€ç›®çš„æ˜¯å‘Šè¯‰å¤„ç†å™¨ä¸‹ä¸€æ­¥è¦æ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤ã€‚</li>\n<li>å½“å‰æŒ‡ä»¤çš„å®Œæ•´åœ°å€ä¸º CS:EIPï¼ˆä»£ç æ®µå¯„å­˜å™¨åŠ æŒ‡ä»¤æŒ‡é’ˆï¼‰ã€‚</li>\n<li>å¦‚æœæ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶ EIPï¼Œä»–ä»¬å°±èƒ½æ§åˆ¶ CPU çš„æ‰§è¡Œæµç¨‹ï¼Œå› æ­¤ EIP æ˜¯å¸¸è§æ”»å‡»ï¼ˆå¦‚ç¼“å†²åŒºæº¢å‡ºï¼‰çš„ç›®æ ‡ã€‚</li>\n</ul>\n</li>\n<li>å…¶ä»–æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆOther Pointer Registersï¼‰<ul>\n<li>ESPï¼ˆæ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼‰ï¼šæä¾›ç¨‹åºæ ˆä¸­çš„åç§»å€¼ï¼ŒSS:ESP è¡¨ç¤ºæ ˆé¡¶ï¼ˆå½“å‰æ•°æ®æˆ–åœ°å€åœ¨ç¨‹åºæ ˆä¸­çš„ä½ç½®ï¼‰ã€‚</li>\n<li>EBPï¼ˆåŸºå€æŒ‡é’ˆå¯„å­˜å™¨ï¼‰ï¼šä¸»è¦ç”¨äºå¼•ç”¨ä¼ é€’ç»™å­ç¨‹åºçš„å‚æ•°å˜é‡ï¼ˆå¦‚å‡½æ•°è°ƒç”¨ï¼‰ã€‚SS:EBP è¡¨ç¤ºå½“å‰è°ƒç”¨çš„æ ˆå¸§(stack frame)ã€‚</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n<h1 id=\"Assembly basics\" class=\"active\"><a class=\"anchor\"  href=\"#Assembly basics\">#</a> Assembly basics</h1>\n\n<h2 id=\"Simple Instructions\" class=\"active\"><a class=\"anchor\"  href=\"#Simple Instructions\">#</a>Simple Instructions</h2>\n\n<ol>\n<li>mov instruction</li>\n</ol>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b589f37dc7.png\" alt=\"img\"></p>\n<p>lea (load effective address) instruction puts a memory address into the<br>destination </p>\n<ul>\n<li>e.g. lea eax, [ebx+8] puts EBX+8 into EAX </li>\n<li>e.g. mov eax, [ebx+8] loads the data at the memory address EBX+8</li>\n</ul>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b595145504.png\" alt=\"img\"></p>\n<ul>\n<li>mov eax, [ebx+8] places the value 0x20 into EAX </li>\n<li>lea eax, [ebx+8] places the value 0xB30048 into EAX</li>\n</ul>\n<ol start=\"2\">\n<li>Arithmetic</li>\n</ol>\n<ul>\n<li>sub eax, 0x10<br>æè¿°ï¼šä»å¯„å­˜å™¨ EAX ä¸­å‡å» 0x10ï¼ˆåå…­è¿›åˆ¶çš„ 16ï¼‰ã€‚<br>ç»“æœï¼šEAX çš„å€¼å‡å°‘ 16ã€‚</li>\n<li>add eax, ebx<br>æè¿°ï¼šå°†å¯„å­˜å™¨ EBX çš„å€¼åŠ åˆ° EAX ä¸­ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ EAX ä¸­ã€‚<br>ç»“æœï¼šEAX &#x3D; EAX + EBXã€‚</li>\n<li>inc edx<br>æè¿°ï¼šå°†å¯„å­˜å™¨ EDX çš„å€¼åŠ  1ã€‚<br>ç»“æœï¼šEDX çš„å€¼å¢åŠ  1ã€‚</li>\n<li>dec ecx<br>æè¿°ï¼šå°†å¯„å­˜å™¨ ECX çš„å€¼å‡ 1ã€‚<br>ç»“æœï¼šECX çš„å€¼å‡å°‘ 1ã€‚</li>\n<li>mul 0x50<br>æè¿°ï¼šå°†å¯„å­˜å™¨ EAX çš„å€¼ä¹˜ä»¥ 0x50ï¼ˆåå…­è¿›åˆ¶çš„ 80ï¼‰ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ EDX<br>ä¸­ã€‚<br>ç»“æœï¼šEAX ä¸­å­˜å‚¨ä½ 32 ä½çš„ä¹˜ç§¯ï¼ŒEDX ä¸­å­˜å‚¨é«˜ 32 ä½çš„ä¹˜ç§¯ã€‚</li>\n<li>div 0x75<br>æè¿°ï¼šç”¨å¯„å­˜å™¨ EDX<br>ï¼ˆå°† EDX å’Œ EAX ç»“åˆèµ·æ¥ï¼Œè¡¨ç¤º 64 ä½çš„æ•°å€¼ï¼‰é™¤ä»¥ 0x75ï¼ˆåå…­è¿›åˆ¶çš„ 117ï¼‰ã€‚<br>ç»“æœï¼šå•†å­˜å‚¨åœ¨ EAX ä¸­ï¼Œä½™æ•°å­˜å‚¨åœ¨ EDX ä¸­ã€‚</li>\n</ul>\n<ol start=\"3\">\n<li>Logics</li>\n</ol>\n<ul>\n<li>xor eax, eax<br>æè¿°ï¼šå°†å¯„å­˜å™¨ EAX å’Œè‡ªèº«è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œæ¸…é™¤ EAX ä¸­çš„å€¼ï¼ˆå³å°† EAX ç½®ä¸º 0ï¼‰ã€‚<br>ç»“æœï¼šEAX &#x3D; 0ã€‚</li>\n<li>or eax, 0x7575<br>æè¿°ï¼šå¯¹ EAX å¯„å­˜å™¨å’Œ 0x7575 è¿›è¡Œé€»è¾‘æˆ–ï¼ˆORï¼‰æ“ä½œã€‚<br>ç»“æœï¼šEAX çš„æ¯ä¸ªä½éƒ½ä¸ 0x7575 çš„ç›¸åº”ä½è¿›è¡Œæˆ–æ“ä½œã€‚</li>\n<li>mov eax, 0xA å’Œ shl eax, 2<br>mov eax, 0xAï¼šå°† EAX è®¾ç½®ä¸º 0xAï¼ˆåå…­è¿›åˆ¶çš„ 10ï¼‰ã€‚<br>shl eax, 2ï¼šå°† EAX å¯„å­˜å™¨ä¸­çš„å€¼å·¦ç§» 2 ä½ã€‚<br>ç»“æœï¼šEAX çš„å€¼å˜ä¸º 0x28ï¼ˆåå…­è¿›åˆ¶çš„ 40ï¼‰ï¼Œå› ä¸ºäºŒè¿›åˆ¶çš„ 1010 å·¦ç§» 2 ä½å˜ä¸º 101000ã€‚</li>\n<li>mov bl, 0xA å’Œ ror bl, 2<br>mov bl, 0xAï¼šå°† BL è®¾ç½®ä¸º 0xAï¼ˆåå…­è¿›åˆ¶çš„ 10ï¼‰ã€‚<br>ror bl, 2ï¼šå°† BL å¯„å­˜å™¨ä¸­çš„å€¼å³æ—‹ 2 ä½ã€‚<br>ç»“æœï¼šBL çš„å€¼å˜ä¸º 10000010ï¼Œå› ä¸ºäºŒè¿›åˆ¶çš„ 1010 å³æ—‹ 2 ä½å˜ä¸º 10000010ã€‚</li>\n</ul>\n<ol start=\"4\">\n<li>nop<br>æè¿°ï¼šNOP æŒ‡ä»¤ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä»…ä»…è®©å¤„ç†å™¨ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚<br>ä½œç”¨ï¼šNOP å®é™…ä¸Šæ˜¯ xchg eax, eax çš„ä¼ªæŒ‡ä»¤ï¼Œå› ä¸ºå°† EAX ä¸è‡ªèº«äº¤æ¢ä¸ä¼šæ”¹å˜ä»»ä½•å€¼ã€‚<br>ç”¨é€”ï¼šåœ¨ç¼“å†²åŒºæº¢å‡ºæ”»å‡»ä¸­ï¼Œæ”»å‡»è€…å¸¸ä½¿ç”¨ NOP æŒ‡ä»¤æ¥å¡«å……æ”»å‡»ä»£ç ï¼Œä½¿å¾—æ‰§è¡Œå…·æœ‰ä¸€å®šçš„ç¼“å†²ç©ºé—´ã€‚NOP çš„æ“ä½œç æ˜¯ 0x90ã€‚</li>\n</ol>\n<h2 id=\"The Stack\" class=\"active\"><a class=\"anchor\"  href=\"#The Stack\">#</a>The Stack</h2>\n\n<ol>\n<li>æ ˆçš„åŸºæœ¬æ¦‚å¿µ<br>æ ˆ æ˜¯ä¸€ç§ åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ çš„æ•°æ®ç»“æ„ï¼Œè¿™æ„å‘³ç€æœ€åæ”¾å…¥çš„æ•°æ®å°†æ˜¯ç¬¬ä¸€ä¸ªè¢«å–å‡ºçš„ã€‚<br>æ ˆé€šå¸¸ç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€å’Œä¸€äº›æ§åˆ¶ä¿¡æ¯ã€‚<br>æ ˆçš„ä¸»è¦å¯„å­˜å™¨åŒ…æ‹¬ï¼š<br>ESPï¼ˆæ ˆæŒ‡é’ˆï¼‰ï¼šæŒ‡å‘å½“å‰æ ˆé¡¶ã€‚<br>EBPï¼ˆåŸºå€æŒ‡é’ˆï¼‰ï¼šè·Ÿè¸ªå±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°çš„ä½ç½®ã€‚</li>\n<li>æ ˆæŒ‡ä»¤<br>æ ˆæ“ä½œåŒ…æ‹¬ä»¥ä¸‹å‡ ç§å¸¸è§æŒ‡ä»¤ï¼š</li>\n</ol>\n<ul>\n<li>pushï¼šå°†æ•°æ®å‹å…¥æ ˆä¸­ï¼ŒESP ä¼šå‡å°‘ï¼ˆæ ˆå‘ä¸‹å¢é•¿ï¼‰ã€‚</li>\n<li>popï¼šä»æ ˆä¸­å¼¹å‡ºæ•°æ®ï¼ŒESP ä¼šå¢åŠ ã€‚</li>\n<li>callï¼šè°ƒç”¨å‡½æ•°ï¼Œå°†å½“å‰æŒ‡ä»¤çš„åœ°å€å‹å…¥æ ˆä¸­ï¼Œå¹¶è·³è½¬åˆ°æŒ‡å®šå‡½æ•°çš„ä½ç½®ã€‚</li>\n<li>leaveï¼šç”¨äºå‡½æ•°è¿”å›æ—¶ï¼Œå°†æ ˆæ¢å¤åˆ°è°ƒç”¨è€…çš„çŠ¶æ€ã€‚</li>\n<li>enterï¼šä¸ºæ–°å‡½æ•°æ ˆå¸§åˆ†é…ç©ºé—´ï¼Œä¿å­˜å½“å‰çš„ EBPï¼Œå¹¶æ›´æ–° EBP ä¸ºæ–°æ ˆå¸§çš„èµ·å§‹ä½ç½®ã€‚</li>\n<li>retï¼šå‡½æ•°è¿”å›ï¼Œå°†æ ˆé¡¶çš„è¿”å›åœ°å€å¼¹å‡ºåˆ° EIP ä¸­ï¼Œæ¢å¤ç¨‹åºçš„æ‰§è¡Œã€‚</li>\n</ul>\n<ol start=\"3\">\n<li>å‡½æ•°è°ƒç”¨çš„æ ˆæ“ä½œ<br>åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œæ ˆçš„ä½¿ç”¨é€šå¸¸æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</li>\n</ol>\n<ul>\n<li>å‚æ•°å…¥æ ˆï¼šä½¿ç”¨ push æŒ‡ä»¤å°†å‡½æ•°çš„å‚æ•°ä¾æ¬¡å‹å…¥æ ˆä¸­ã€‚</li>\n<li>è°ƒç”¨å‡½æ•°ï¼šä½¿ç”¨ <code>call &lt;location&gt;</code> æŒ‡ä»¤è°ƒç”¨å‡½æ•°ã€‚å½“å‰æŒ‡ä»¤åœ°å€ï¼ˆEIPï¼‰ä¼šè¢«å‹å…¥æ ˆä¸­ï¼Œä¾¿äºå‡½æ•°æ‰§è¡Œå®Œæ¯•åè¿”å›ã€‚EIP å°†è¢«è®¾ç½®ä¸ºå‡½æ•°çš„èµ·å§‹åœ°å€ï¼ˆ<code>&lt;location&gt;</code>ï¼‰ã€‚</li>\n<li>ä¿å­˜å±€éƒ¨å˜é‡å’Œ EBPï¼šå‡½æ•°è°ƒç”¨åï¼Œå±€éƒ¨å˜é‡å’Œè°ƒç”¨è€…çš„ EBP è¢«å‹å…¥æ ˆä¸­ï¼Œç”¨äºä¸ºæ–°å‡½æ•°æ ˆå¸§åˆ†é…ç©ºé—´ã€‚</li>\n<li>æ‰§è¡Œå‡½æ•°ï¼šå‡½æ•°å†…éƒ¨æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬è®¿é—®å±€éƒ¨å˜é‡ã€å¤„ç†é€»è¾‘å’Œä¿®æ”¹æ•°æ®ã€‚</li>\n<li>æ¢å¤å±€éƒ¨å˜é‡å’Œè°ƒç”¨è€…çš„ EBPï¼šä½¿ç”¨ leave æŒ‡ä»¤ï¼Œå°† EBP å’Œå±€éƒ¨å˜é‡æ¢å¤ä¸ºè°ƒç”¨è€…çš„çŠ¶æ€ã€‚</li>\n<li>æ¢å¤ EIPï¼šä½¿ç”¨ ret æŒ‡ä»¤ï¼Œå°†æ ˆé¡¶çš„è¿”å›åœ°å€å¼¹å‡ºåˆ° EIP ä¸­ï¼Œä»¥ç»§ç»­æ‰§è¡Œè°ƒç”¨å‡½æ•°çš„ç¨‹åºã€‚</li>\n<li>æ¸…ç†å‚æ•°ï¼šå‚æ•°åœ¨å‡½æ•°è¿”å›åå¯èƒ½éœ€è¦è¢«æ¸…ç†ï¼Œä»è€Œæ¢å¤æ ˆçš„å¹³è¡¡çŠ¶æ€ã€‚</li>\n</ul>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/25/671b64bb0713f.png\" alt=\"img\"></p>\n<h2 id=\"Conditionals and Branching\" class=\"active\"><a class=\"anchor\"  href=\"#Conditionals and Branching\">#</a>Conditionals and Branching</h2>\n\n<ol>\n<li>æ¡ä»¶æŒ‡ä»¤ï¼ˆConditionalsï¼‰<ol>\n<li>test æŒ‡ä»¤</li>\n</ol>\n<ul>\n<li>åŠŸèƒ½ï¼štest æŒ‡ä»¤ç±»ä¼¼äºé€»è¾‘ä¸ï¼ˆANDï¼‰æ“ä½œï¼Œä½†ä¸ä¼šä¿®æ”¹æ“ä½œæ•°ï¼Œåªç”¨äºè®¾ç½®æ ‡å¿—ä½ã€‚</li>\n<li>æ ‡å¿—ä½ï¼šä¸»è¦è®¾ç½® ZFï¼ˆé›¶æ ‡å¿—ï¼‰ã€‚å¦‚æœæ“ä½œæ•°ä¹‹é—´çš„é€»è¾‘ä¸ç»“æœä¸ºé›¶ï¼Œåˆ™ ZF è¢«ç½® 1ï¼Œå¦åˆ™ç½® 0ã€‚</li>\n<li>ç”¨æ³•ï¼šé€šå¸¸ç”¨äºæ£€æŸ¥æŸä¸ªä½æ˜¯å¦è¢«è®¾ç½®ï¼Œä¾‹å¦‚åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºé›¶æˆ–æ£€æµ‹ç‰¹å®šä½æ˜¯å¦ä¸º 1ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>cmp æŒ‡ä»¤</li>\n</ol>\n<ul>\n<li>åŠŸèƒ½ï¼šcmp æŒ‡ä»¤ç±»ä¼¼äºå‡æ³•ï¼ˆSUBï¼‰æ“ä½œï¼Œä½†ä¸ä¼šæ”¹å˜æ“ä½œæ•°çš„å€¼ï¼Œåªç”¨äºè®¾ç½®æ ‡å¿—ä½ã€‚</li>\n<li>æ ‡å¿—ä½ï¼šä¸»è¦è®¾ç½® ZFï¼ˆé›¶æ ‡å¿—ï¼‰ å’Œ CFï¼ˆè¿›ä½æ ‡å¿—ï¼‰ã€‚</li>\n<li>ZFï¼ˆé›¶æ ‡å¿—ï¼‰ï¼šå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸ç­‰æ—¶ï¼ŒZF è¢«ç½® 1ã€‚</li>\n<li>CFï¼ˆè¿›ä½æ ‡å¿—ï¼‰ï¼šå½“ç›®æ ‡æ“ä½œæ•°å°äºæºæ“ä½œæ•°æ—¶ï¼ŒCF è¢«ç½® 1ã€‚</li>\n<li>ç”¨æ³•ï¼šé€šå¸¸ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å€¼å¤§å°ï¼Œä»¥å†³å®šä¸‹ä¸€æ­¥çš„æ¡ä»¶è·³è½¬ã€‚</li>\n</ul>\n<ol start=\"3\">\n<li>cmp æŒ‡ä»¤çš„æ ‡å¿—ä½ç»“æœ<br> cmp dst, src çš„ä¸åŒç»“æœä¸‹çš„æ ‡å¿—ä½å˜åŒ–ï¼š</li>\n</ol>\n<ul>\n<li>dst &#x3D; srcï¼šZF &#x3D; 1, CF &#x3D; 0ï¼ˆç›®æ ‡æ“ä½œæ•°ç­‰äºæºæ“ä½œæ•°ï¼‰ã€‚</li>\n<li>dst &lt; srcï¼šZF &#x3D; 0, CF &#x3D; 1ï¼ˆç›®æ ‡æ“ä½œæ•°å°äºæºæ“ä½œæ•°ï¼‰ã€‚</li>\n<li>dst &gt; srcï¼šZF &#x3D; 0, CF &#x3D; 0ï¼ˆç›®æ ‡æ“ä½œæ•°å¤§äºæºæ“ä½œæ•°ï¼‰ã€‚</li>\n</ul>\n</li>\n<li>åˆ†æ”¯æŒ‡ä»¤ï¼ˆBranchingï¼‰<br>åˆ†æ”¯æ˜¯æ ¹æ®ç¨‹åºçš„æ§åˆ¶æµæœ‰æ¡ä»¶åœ°æ‰§è¡Œä»£ç åºåˆ—ã€‚åˆ†æ”¯æŒ‡ä»¤å†³å®šç¨‹åºåœ¨ç‰¹å®šæ¡ä»¶ä¸‹çš„è·³è½¬ã€‚<ol>\n<li>æ— æ¡ä»¶è·³è½¬ï¼ˆUnconditional Jumpï¼‰</li>\n</ol>\n<ul>\n<li>jmp <location>ï¼šæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ä¼šç›´æ¥è·³è½¬åˆ°æŒ‡å®šçš„ä½ç½®ï¼ˆ<location>ï¼‰ï¼Œæ— è®ºæ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚</li>\n<li>ç”¨æ³•ï¼šæ— æ¡ä»¶è·³è½¬ç”¨äºæ”¹å˜ç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯ä¸€ç§ä¸ä¾èµ–æ ‡å¿—ä½çš„è·³è½¬å½¢å¼ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>æ¡ä»¶è·³è½¬ï¼ˆConditional Jumpï¼‰</li>\n</ol>\n<ul>\n<li>æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼šä½¿ç”¨æ ‡å¿—å¯„å­˜å™¨çš„å€¼æ¥å†³å®šæ˜¯å¦è¿›è¡Œè·³è½¬ã€‚å¸¸è§çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤æœ‰è¶…è¿‡ 30 ç§ã€‚</li>\n</ul>\n</li>\n</ol>\n",
            "tags": [
                "software security",
                "C language",
                "Linux",
                "gdb"
            ]
        },
        {
            "id": "http://example.com/course/C-language-basics-and-Computer-memory/",
            "url": "http://example.com/course/C-language-basics-and-Computer-memory/",
            "title": "C language basics and Computer memory",
            "date_published": "2024-10-24T11:00:05.000Z",
            "content_html": "<h1 id=\"C language basics\" class=\"active\"><a class=\"anchor\"  href=\"#C language basics\">#</a>C language basics</h1>\n<h2 id=\"input/output\" class=\"active\"><a class=\"anchor\"  href=\"#input/output\">#</a> input/output</h2>\n\n<ol>\n<li>To print output to the terminal screen:</li>\n</ol>\n<ul>\n<li>printf(â€œHello\\nâ€);</li>\n<li>printf(â€œHello %sâ€, â€œhaxorâ€);  &#x2F;&#x2F; using a format string</li>\n</ul>\n<ol start=\"2\">\n<li>To get input from the user:</li>\n</ol>\n<ul>\n<li>scanf(â€œ%dâ€, &amp;number);</li>\n</ul>\n <figure class=\"highlight c\"><figcaption><span>Input/output format symbols</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;test\\n&quot;</span>);   <span class=\"comment\">// `\\n`:  Carriage return/new line</span></span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;test %d&quot;</span>, <span class=\"number\">123</span>);  <span class=\"comment\">//`%d`:  Decimal value</span></span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;test %s&quot;</span>, <span class=\"string\">&quot;123&quot;</span>);  <span class=\"comment\">//`%s`:  String value</span></span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;test %x&quot;</span>, <span class=\"number\">0x123</span>);  <span class=\"comment\">//`%x`:  Hex value</span></span><br></pre></td></tr></table></figure>\n\n <figure class=\"highlight c\"><figcaption><span>C Program takes command-line arguments</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//meet.c</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\">greeting(<span class=\"type\">char</span> *temp1, <span class=\"type\">char</span> *temp2) <span class=\"comment\">// greeting function to say hello</span></span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">    <span class=\"type\">char</span> name[<span class=\"number\">400</span>];  <span class=\"comment\">// string variable to hold the name</span></span><br><span class=\"line\">    <span class=\"built_in\">strcpy</span>(name, temp2);  <span class=\"comment\">// copy function argument to name</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Hello %s %s\\n&quot;</span>, temp1, name);  <span class=\"comment\">// print out the greeting</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">main(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> *argv[]) <span class=\"comment\">// note the format for arguments</span></span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">    greeting(argv[<span class=\"number\">1</span>], argv[<span class=\"number\">2</span>]);  <span class=\"comment\">// call function, pass title &amp; name</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Bye %s %s\\n&quot;</span>, argv[<span class=\"number\">1</span>], argv[<span class=\"number\">2</span>]);  <span class=\"comment\">// say â€œbye&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Compiling C programs\" class=\"active\"><a class=\"anchor\"  href=\"#Compiling C programs\">#</a> Compiling C programs</h2>\nCompiling C programs(Linux) Using gcc\n\n<ol>\n<li><p>To compile our <code>meet.c</code> program, type</p>\n <figure class=\"highlight bash\"><figcaption><span>OvO</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$gcc</span> -o meet meet.c</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Then to execute the new program, type</p>\n <figure class=\"highlight bash\"><figcaption><span>OvO</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ./meet zz</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Commonly used gcc flags</p>\n</li>\n</ol>\n<ul>\n<li>-o <filename>: produces compiled binary file with filename (a.out by default).</li>\n<li>-S: produces assembly code in a file; saved with a .s extension</li>\n<li>-g, -ggdb: produces extra debugging information for gdb (GNU debugger)</li>\n<li>-c: compiles without linking; produces object files with an .o extension</li>\n<li>Check out manual by using: man gcc</li>\n</ul>\n<ol start=\"4\">\n<li>32-bit vs 64-bit compilation</li>\n</ol>\n<ul>\n<li>To compile into 32-bit binaries: <figure class=\"highlight bash\"><figcaption><span>OvO</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$gcc</span> -m32 hello.c -o hello</span><br></pre></td></tr></table></figure></li>\n<li>install a standard library of  <figure class=\"highlight bash\"><figcaption><span>OvO</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$sudo</span> apt install gcc-multilib </span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"C vs C#\" class=\"active\"><a class=\"anchor\"  href=\"#C vs C#\">#</a> C vs C#</h2>\n\n<ol>\n<li>C# is type-safe</li>\n</ol>\n<ul>\n<li>Strong static type system + runtime checks (e.g. bounds, type casts) + automatic memory management</li>\n</ul>\n<ol start=\"2\">\n<li>C is type-unsafe</li>\n</ol>\n<ul>\n<li>Pointers + no runtime check (out-of-bound access, bad type casts), manual memory management<br>Runtime array bounds check in C#</li>\n</ul>\n<p>If the following C# code is executed on .NET:<br> <figure class=\"highlight c#\"><figcaption><span>(â—Ë‡âˆ€Ë‡â—)</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span> arr[<span class=\"number\">10</span>];</span><br><span class=\"line\"> arr[<span class=\"number\">10</span>] = <span class=\"number\">50</span>;</span><br></pre></td></tr></table></figure><br>An exception will be raised at runtime!</p>\n<p>The length of the array is recorded and checked by the runtime</p>\n<ul>\n<li>The length of an array is fixed once created</li>\n</ul>\n<p>No runtime array bounds check in C, If the same C code is executed:<br> <figure class=\"highlight c\"><figcaption><span>(â—Ë‡âˆ€Ë‡â—)</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> arr[<span class=\"number\">10</span>];</span><br><span class=\"line\"> arr[<span class=\"number\">10</span>] = <span class=\"number\">50</span>;</span><br></pre></td></tr></table></figure><br>No error, result in a silent buffer overflow!</p>\n<ul>\n<li>Unexpected behaviours such as mysterious crashes depending on what was overwritten</li>\n<li>Attackers may exploit this if they can control the overwritten data</li>\n</ul>\n<ol start=\"3\">\n<li>Automatic memory management in C#</li>\n</ol>\n<p>Programmers do not write code to perform memory management tasks<br>Garbage collector manages the allocation and release of memory<br>C# has no common memory problems such as buffer overflow</p>\n<ol start=\"4\">\n<li>C# strings</li>\n</ol>\n<p>C# strings are <code>objects</code> of the <code>String</code> class</p>\n<ul>\n<li>Similar to an array of chars, but immutable</li>\n<li>The length is stored on the object for bounds checks at runtime</li>\n</ul>\n<p>All string manipulation operations do not modify the original string</p>\n<ul>\n<li>A new string is created upon modification</li>\n<li>For example, <code>str.Trim()</code> returns a new string</li>\n</ul>\n<ol start=\"5\">\n<li>C strings</li>\n</ol>\n<p>C strings are arrays of characters</p>\n<ul>\n<li>Terminated by and including the first occurrence of the null character <code>\\0</code></li>\n</ul>\n<p>String length is not automatically tracked</p>\n<ul>\n<li>It is determined by the number of bytes (character) preceding the null character. </li>\n<li>The memory required to store a string is the number of characters plus one</li>\n</ul>\n<p>A string can be manipulated just like any other arrays</p>\n<ul>\n<li>We usually use some built-in string functions in C libraries <figure class=\"highlight c\"><figcaption><span>copy one string to another</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string.h&gt;</span>    <span class=\"comment\">// use string library     </span></span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"type\">char</span> str1[] = <span class=\"string\">&quot;Hello, Z&quot;</span>;</span><br><span class=\"line\"><span class=\"type\">char</span> str2[<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"built_in\">strcpy</span>(str2, str1);  <span class=\"comment\">// copy each character in str1 into str2</span></span><br></pre></td></tr></table></figure>\n The function <code>strcpy</code> copies each character in the source string (a series of characters ending with and including a null character) into the destination string <figure class=\"highlight c\"><figcaption><span>To compare two strings</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> str1[] = <span class=\"string\">&quot;hello&quot;</span>;</span><br><span class=\"line\"> <span class=\"type\">char</span> str2[] = <span class=\"string\">&quot;haxor&quot;</span>;</span><br><span class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"built_in\">strcmp</span>(str1, str2) == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Strings are the same.\\n&quot;</span>);</span><br><span class=\"line\"> <span class=\"keyword\">else</span></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Strings are different.\\n&quot;</span>);</span><br></pre></td></tr></table></figure>\n This code prints out: Strings are different.<br> Note that the function <code>strcmp()</code> does not return a <code>boolean</code> result</li>\n<li>Zero represents false, anything else represents true</li>\n<li>No <code>boolean</code> type in C language prior to C99</li>\n</ul>\n<ol start=\"6\">\n<li><strong>Other common string functions</strong> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpYm9va3Mub3JnL3dpa2kvQ19Qcm9ncmFtbWluZy9TdHJpbmdfbWFuaXB1bGF0aW9u\">More can be found</span><br> <code>strlen</code>: gets the length of a string<br> <code>strncpy</code>: copies one string to another with a bound<br> <code>strcat</code>, <code>strncat</code>: string concatenation<br> <code>gets</code>, <code>fgets</code>: receives input into a string</li>\n</ol>\n<h2 id=\"C strings is error prone\" class=\"active\"><a class=\"anchor\"  href=\"#C strings is error prone\">#</a>C strings is error prone</h2>\n\n<ol>\n<li>Common string manipulation errors:</li>\n</ol>\n<ul>\n<li>Buffer errors</li>\n<li>Heap errors</li>\n<li>Outâ€byâ€bound errors</li>\n<li>Integer overflows</li>\n<li>Other memory, pointer and type errors</li>\n</ul>\n<p><strong>When data is copied from an unbounded source to a fixedâ€length sink</strong><br> <figure class=\"highlight c\"><figcaption><span>Unbounded string copy</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\"> \t<span class=\"type\">char</span> username[<span class=\"number\">8</span>];</span><br><span class=\"line\"> \t<span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Please enter your username:&quot;</span>);</span><br><span class=\"line\"> \tgets(username);</span><br><span class=\"line\"> \t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Your username is %s\\n&quot;</span>, username);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>Use of <code>gets()</code> Function</li>\n</ul>\n<p>The function <code>gets()</code> reads input from the user into a buffer, but it does not check the length of the input against the bufferâ€™s size.<br>In this code, the <code>username</code> array is only 8 bytes long. However, <code>gets()</code> allows users to enter an input of any length, which means it can write beyond the 8 bytes allocated for <code>username</code>.<br>This can cause a buffer overflow, which can lead to memory corruption, unexpected behavior, or even security vulnerabilities where attackers can execute arbitrary code.</p>\n<ul>\n<li>Fixed-Length Buffer</li>\n</ul>\n<p>The username array is declared to have a size of 8, but we need to reserve one byte for the null-terminator <code>\\0</code>, which marks the end of the string.<br>This means only 7 characters can safely be stored in the username buffer.<br>If the input exceeds this limit, it will overflow into adjacent memory, potentially causing the program to crash or behave unpredictably.<br> <figure class=\"highlight c\"><figcaption><span>Unbounded string copy(fixed)</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"type\">char</span> username[<span class=\"number\">8</span>];  <span class=\"comment\">// Buffer limited to 8 bytes</span></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Please enter your username:&quot;</span>);</span><br><span class=\"line\">    fgets(username, <span class=\"keyword\">sizeof</span>(username), <span class=\"built_in\">stdin</span>);  <span class=\"comment\">// Limit input size to prevent overflow</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Your username is %s\\n&quot;</span>, username);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;  <span class=\"comment\">// Standard return type</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br><strong>Better string functions from libraries</strong><br> Should use functions that restrict the number of bytes for safer programming</p>\n<ul>\n<li>Use <code>fgets()</code>, instead of <code>gets()</code></li>\n<li>Use <code>strncpy()</code>, instead of <code>strcpy()</code></li>\n<li>Use <code>strncat()</code>, instead of <code>strcat()</code></li>\n<li>Use <code>snprintf()</code>, instead of instead of <code>sprintf()</code></li>\n</ul>\n<p><strong>Nullâ€termination errors</strong><br> <figure class=\"highlight c\"><figcaption><span>Nullâ€termination errors</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> *argv[])</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">\t<span class=\"type\">char</span> arr[<span class=\"number\">10</span>];</span><br><span class=\"line\">\t<span class=\"built_in\">strncpy</span>(arr, <span class=\"string\">&quot;0123456789&quot;</span>, <span class=\"keyword\">sizeof</span>(arr));</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s\\n&quot;</span>, arr);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><br>The array is not properly terminated by a null character! </p>\n<ul>\n<li>When there is no null character among the first n character of the source, the string placed in the<br>destination will not be null-terminated!<br>The <code>printf()</code> call prints out all bytes as character till reaching a null!</li>\n</ul>\n<p>To test out, letâ€™s add another array:<br> <figure class=\"highlight c\"><figcaption><span>Nullâ€termination errors</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> *argv[])</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">\t<span class=\"type\">char</span> arr[<span class=\"number\">10</span>];</span><br><span class=\"line\">\t<span class=\"type\">char</span> arr2[<span class=\"number\">10</span>];</span><br><span class=\"line\">\t<span class=\"built_in\">strncpy</span>(arr, <span class=\"string\">&quot;0123456789&quot;</span>, <span class=\"keyword\">sizeof</span>(arr));</span><br><span class=\"line\">\t<span class=\"built_in\">strncpy</span>(arr2, <span class=\"string\">&quot;9876543210&quot;</span>, <span class=\"keyword\">sizeof</span>(arr2));</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s\\n&quot;</span>, arr);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><br> The program will print out 01234567899876543210<br> Where the length of source string is the same or greater than the length of target string</p>\n<ul>\n<li>The source string gets truncated</li>\n<li>The target string may not be properly terminated by null!</li>\n</ul>\n<p> How can we fix it?<br> Manually add a null character at the end of the target string:<br> <figure class=\"highlight c\"><figcaption><span>Nullâ€termination errors(fixed)</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> *argv[])</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">\t<span class=\"type\">char</span> arr[<span class=\"number\">10</span>];</span><br><span class=\"line\">\t<span class=\"built_in\">strncpy</span>(arr, <span class=\"string\">&quot;0123456789&quot;</span>, <span class=\"keyword\">sizeof</span>(arr)<span class=\"number\">-1</span>);</span><br><span class=\"line\">\tarr[<span class=\"keyword\">sizeof</span>(arr)<span class=\"number\">-1</span>] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s\\n&quot;</span>, arr);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><br>The function char <code>*fgets(char *str, int n, FILE *stream)</code> reads <code>(n-1)</code> characters from the specific stream plus the final null character</p>\n<h1 id=\" Computer memory\" class=\"active\"><a class=\"anchor\"  href=\"# Computer memory\">#</a> Computer memory</h1>\n\n<h2 id=\" Intel x86 (32-bit)\" class=\"active\"><a class=\"anchor\"  href=\"# Intel x86 (32-bit)\">#</a> Intel x86 (32-bit)</h2>\n\n<ol>\n<li>von Neumann architecture</li>\n</ol>\n<ul>\n<li><p>Central processing unit (CPU) executes code </p>\n</li>\n<li><p>Main memory of the system (RAM) stores all data and code</p>\n</li>\n<li><p>Input&#x2F;output system (I&#x2F;O) interfaces with devices such as hard drives, keyboards, and monitors</p>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/24/671a56f0c953f.png\" alt=\"img\"></p>\n</li>\n</ul>\n<ol start=\"2\">\n<li>CPU</li>\n</ol>\n<p>The <strong>control unit</strong> gets instructions to execute from RAM using the instruction pointer, which stores the address of the instruction to execute<br><strong>Registers</strong> are the CPUâ€™s basic data storage units and are often used to save time so that the CPU doesnâ€™t need to access RAM. </p>\n<p>åœ¨ 32 ä½ x86 æ¶æ„ä¸­ï¼Œä¸»è¦çš„é€šç”¨å¯„å­˜å™¨åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>EAX: ç´¯åŠ å™¨å¯„å­˜å™¨ï¼Œç”¨äºç®—æœ¯è¿ç®—å’Œè¿”å›å€¼ã€‚</li>\n<li>EBX: åŸºå€å¯„å­˜å™¨ï¼Œå¸¸ç”¨äºåŸºå€å­˜å–ã€‚</li>\n<li>ECX: è®¡æ•°å™¨å¯„å­˜å™¨ï¼Œå¸¸ç”¨äºå¾ªç¯å’Œç§»ä½æ“ä½œã€‚</li>\n<li>EDX: æ•°æ®å¯„å­˜å™¨ï¼Œç”¨äº I&#x2F;O æ“ä½œå’Œä¹˜é™¤æ³•ã€‚</li>\n<li>ESI: æºç´¢å¼•å¯„å­˜å™¨ï¼Œå¸¸ç”¨äºæŒ‡å‘å†…å­˜æ•°æ®æºã€‚</li>\n<li>EDI: ç›®æ ‡ç´¢å¼•å¯„å­˜å™¨ï¼Œå¸¸ç”¨äºæŒ‡å‘å†…å­˜æ•°æ®ç›®æ ‡ã€‚</li>\n<li>EBP: åŸºå€æŒ‡é’ˆå¯„å­˜å™¨ï¼Œç”¨äºæ ˆå¸§åŸºå€æŒ‡é’ˆã€‚</li>\n<li>ESP: æ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰æ ˆé¡¶</li>\n</ul>\n<p>The <strong>Arithmetic Logic Unit (ALU)</strong> executes an instruction fetched from RAM and places the results in registers or memory</p>\n<p>CPU runs a program by fetching and executing each instruction</p>\n<h2 id=\"Programs in the main memory\" class=\"active\"><a class=\"anchor\"  href=\"#Programs in the main memory\"> #</a>  Programs in the main memory</h2>\n\n<p> Processes are programs loaded into memory, broken into small sections</p>\n<ul>\n<li><p>.text section</p>\n</li>\n<li><p>.data section</p>\n</li>\n<li><p>.bss section</p>\n</li>\n<li><p>Heap section</p>\n</li>\n<li><p>Stack section</p>\n</li>\n<li><p>Environment&#x2F;Arguments section</p>\n<p><img data-src=\"https://img.picui.cn/free/2024/10/24/671a56f09cb3d.png\" alt=\"img\"></p>\n</li>\n</ul>\n<ol>\n<li>.text section</li>\n</ol>\n<p>Correspond to the .text portion of the binary executable file. </p>\n<p>Contain the machine instructions to get the task done</p>\n<ol start=\"2\">\n<li>.data section</li>\n</ol>\n<p>Store global initialised variables such as:</p>\n<ul>\n<li>int a &#x3D; 0;</li>\n</ul>\n<ol start=\"3\">\n<li>.bss section</li>\n</ol>\n<p>Store global uninitialised variables such as:</p>\n<ul>\n<li>int a;</li>\n</ul>\n<ol start=\"4\">\n<li>Heap section</li>\n</ol>\n<p>Store dynamically allocated variables</p>\n<ul>\n<li>Contain the pre-existing value of that memory</li>\n</ul>\n<p>Grows from the lower-addressed memory to the higher-addressed memory</p>\n<ul>\n<li>int *I &#x3D; malloc (sizeof (int));</li>\n</ul>\n<ol start=\"5\">\n<li>Stack section</li>\n</ol>\n<p>Keep track of function calls (recursively)</p>\n<p>Grow from the higher-addressed memory to the lower-addressed memory</p>\n<p>Local variables are in the stack section</p>\n<ol start=\"6\">\n<li>Environment&#x2F;Arguments section</li>\n</ol>\n<p>Store a copy of system-level variables that may be required by the process</p>\n<ul>\n<li>For example, path, shell name, hostname, etc.</li>\n</ul>\n<p>Command-line arguments are stored in this area.</p>\n<h2 id=\" Buffers\" class=\"active\"><a class=\"anchor\"  href=\"# Buffers\">#</a> Buffers</h2>\n\n<p> A storage place used to receive and hold data until it can be handled by a process<br> Each process can have its own set of buffers</p>\n<ul>\n<li>E.g. memory allocated within the .data or .bss section of the processâ€™s memory<br> Buffer is of <strong>fixed length once allocated</strong>.</li>\n<li>Hold any predefined type of data</li>\n</ul>\n<h2 id=\" Pointers\" class=\"active\"><a class=\"anchor\"  href=\"# Pointers\">#</a> Pointers</h2>\n\n<p>Pointers hold the address of other pieces of memory</p>\n<ul>\n<li>Their size is fixed of 4 bytes for 32-bit memory address</li>\n</ul>\n<p>C string can be written as a pointer to character:</p>\n<ul>\n<li>char * str; </li>\n<li>int * point1;</li>\n</ul>\n<p>C#â€™s reference types implicitly use pointers<br>Use dereference to read the value inside the memory address pointed to by the pointer:</p>\n<ul>\n<li>printf(â€œ%dâ€, *point1);</li>\n</ul>\n<p>The <code>*</code> symbol dereferences the pointer called point1 and displays the value of the integer using the <code>printf()</code> function</p>\n<ul>\n<li>The type of <code>point1</code> is a pointer</li>\n<li>The type of <code>*point1</code> is an integer <figure class=\"highlight c\"><figcaption><span>Putting the pieces of memory together</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> ind = <span class=\"number\">5</span>;                     <span class=\"comment\">// integer stored in .data (initialized)</span></span><br><span class=\"line\"> <span class=\"type\">char</span> *str;                       <span class=\"comment\">// string pointer stored in .bss (uninitialized)</span></span><br><span class=\"line\"> <span class=\"type\">int</span> nothing;                     <span class=\"comment\">// integer stored in .bss (uninitialized)</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"type\">void</span> <span class=\"title function_\">fun</span><span class=\"params\">(<span class=\"type\">int</span> c)</span> </span><br><span class=\"line\">&#123;                                              </span><br><span class=\"line\"> \t<span class=\"type\">int</span> i = c;                                  <span class=\"comment\">// stored in stack section</span></span><br><span class=\"line\"> \tstr = (<span class=\"type\">char</span> *)<span class=\"built_in\">malloc</span>(<span class=\"number\">10</span> * <span class=\"keyword\">sizeof</span>(<span class=\"type\">char</span>));    <span class=\"comment\">// reserves 10 characters in heap region </span></span><br><span class=\"line\"> \t<span class=\"built_in\">strncpy</span>(str, <span class=\"string\">&quot;abcde&quot;</span>, <span class=\"number\">5</span>);                   <span class=\"comment\">// copies &quot;abcde&quot; into str</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"type\">void</span> <span class=\"title function_\">main</span><span class=\"params\">()</span> </span><br><span class=\"line\">&#123; </span><br><span class=\"line\">\tfun(<span class=\"number\">1</span>); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": [
                "software security",
                "C language",
                "Linux"
            ]
        }
    ]
}